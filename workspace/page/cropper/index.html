<!DOCTYPE html>
<html lang="zh">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>jQuery简单且功能强大的图片剪裁插件|DEMO_jQuery之家-自由分享jQuery、html5、css3的插件库</title>
	<link rel="stylesheet" type="text/css" href="css/normalize.css" />
	<link rel="stylesheet" type="text/css" href="css/default.css">
	<link href="assets/css/bootstrap.min.css" rel="stylesheet">
  	<link href="dist/cropper.css" rel="stylesheet">
  	<link href="css/main.css" rel="stylesheet">
	<!--[if IE]>
		<script src="http://libs.useso.com/js/html5shiv/3.7/html5shiv.min.js"></script>
	<![endif]-->
</head>
<body>
<div class="htmleaf-container">
	<!--head-->
	<header class="htmleaf-header">
		<h1>头像上传</h1>
	</header>
	<!-- Content -->
	<div class="container">
		<div class="row"><!--图片显示-->
		  <div class="col-md-9"><!--初始化加载图片-->
			<!-- <h3 class="page-header">Demo:</h3> -->
			<div class="img-container">
			  <img src="" alt="请上传图片">
			</div>
		 </div>    
		</div>

		<div class="row"><!--工具栏-->
		  <!--功能工具栏-->
		  <div class="col-md-9 docs-buttons">
			<!-- <h3 class="page-header">Toolbar:</h3> -->
			<!--样式工具栏-->
			<div class="btn-group">
			  <!--放大-->
			  <button class="btn btn-primary" data-method="zoom" data-option="0.1" type="button" title="Zoom In">
				<span class="docs-tooltip" data-toggle="tooltip" title="$().cropper(&quot;zoom&quot;, 0.1)">
				  <span class="icon icon-zoom-in"></span>
				</span>
			  </button>
			  <!--缩小-->
			  <button class="btn btn-primary" data-method="zoom" data-option="-0.1" type="button" title="Zoom Out">
				<span class="docs-tooltip" data-toggle="tooltip" title="$().cropper(&quot;zoom&quot;, -0.1)">
				  <span class="icon icon-zoom-out"></span>
				</span>
			  </button>
			  <!--左旋转-->
			  <button class="btn btn-primary" data-method="rotate" data-option="-45" type="button" title="Rotate Left">
				<span class="docs-tooltip" data-toggle="tooltip" title="$().cropper(&quot;rotate&quot;, -45)">
				  <span class="icon icon-rotate-left"></span>
				</span>
			  </button>
			  <!--右旋转-->
			  <button class="btn btn-primary" data-method="rotate" data-option="45" type="button" title="Rotate Right">
				<span class="docs-tooltip" data-toggle="tooltip" title="$().cropper(&quot;rotate&quot;, 45)">
				  <span class="icon icon-rotate-right"></span>
				</span>
			  </button>
			</div>

			<!--动作工具栏--> 
			<div class="btn-group">
			  <!--上传-->
			  <label class="btn btn-primary btn-upload" for="inputImage" title="Upload image file">
				<input class="sr-only" id="inputImage" name="file" type="file" accept="image/png,image/gif,image/jpg,image/jpeg">
				<span class="docs-tooltip" data-toggle="tooltip" title="上传图片,只支持jpg,jpeg,png,gif">
				  <span class="icon icon-upload"></span>
				</span>
			  </label>
			  <button onclick="submitImg();">确定</button>
			</div>
			
			<!--裁剪预览工具栏-->
			<div class="btn-group btn-group-crop">
			  <!--获取裁剪预览-->
			  <button class="btn btn-primary" data-method="getCroppedCanvas" type="button">
				<span class="docs-tooltip" data-toggle="tooltip" title="$().cropper(&quot;getCroppedCanvas&quot;)">
				  Get Cropped Canvas
				</span>
			  </button>
			  <!--获取裁剪预览小窗口-->
			  <button class="btn btn-primary" data-method="getCroppedCanvas" data-option="{ &quot;width&quot;: 160, &quot;height&quot;: 90 }" type="button">
				<span class="docs-tooltip" data-toggle="tooltip" title="$().cropper(&quot;getCroppedCanvas&quot;, { &quot;width&quot;: 160, &quot;height&quot;: 90 })">
				  160 &times; 90
				</span>
			  </button>
			  <!--获取裁剪预览大窗口-->
			  <button class="btn btn-primary" data-method="getCroppedCanvas" data-option="{ &quot;width&quot;: 320, &quot;height&quot;: 180 }" type="button">
				<span class="docs-tooltip" data-toggle="tooltip" title="$().cropper(&quot;getCroppedCanvas&quot;, { &quot;width&quot;: 320, &quot;height&quot;: 180 })">
				  320 &times; 180
				</span>
			  </button>
			</div>
			<!-- Show the cropped image in modal -->
			<!--预览窗口-->
			<div class="modal fade docs-cropped" id="getCroppedCanvasModal" aria-hidden="true" aria-labelledby="getCroppedCanvasTitle" role="dialog" tabindex="-1">
			  <div class="modal-dialog">
				<div class="modal-content">
				  <div class="modal-header">
					<button class="close" data-dismiss="modal" type="button" aria-hidden="true">&times;</button>
					<h4 class="modal-title" id="getCroppedCanvasTitle">Cropped</h4>
				  </div>
				  <div class="modal-body"></div>
				  <!-- <div class="modal-footer">
					<button class="btn btn-primary" data-dismiss="modal" type="button">Close</button>
				  </div> -->
				</div>
			  </div>
			</div><!-- /.modal -->
			
		  </div><!-- /.docs-buttons -->

		 
		</div>
		
		
		<form id="newimgform">
			<img id="newimg" name="imgbase" src="" />
			
		</form>
		
	</div>

</div>
	
	<script src="assets/js/jquery.min.js"></script>
	  <script src="assets/js/bootstrap.min.js"></script>
	  <script src="dist/cropper.min.own.js"></script>
	  <script src="js/main.js"></script>
	  <script>
		function submitCropdata(){
			//获取图片大小、位置
			var currentImg = $('.img-container > img')
			var currentImgResult = currentImg.cropper("getData", "");
			//{"x":351.99999999999994,"y":72,"width":576.0000000000001,"height":576.0000000000001,"rotate":0}
			var currentCropBoxResult = currentImg.cropper("getCropBoxData", "");
			//{"left":237.6,"top":46.599999999999994,"width":372.8,"height":372.8}
			
			alert("imgInfo："+JSON.stringify(currentImgResult)+"---------------cropInfo："+JSON.stringify(currentCropBoxResult));
		}
		
		function submitImg(){
			$('.container > img').cropper();
			var $image = $('.img-container > img');
			var src = $image.eq(0).attr("src");
			var canvasdata = $image.cropper("getCanvasData");
			var cropBoxData = $image.cropper('getCropBoxData');
			alert(canvasdata.left);
			convertToData(src, canvasdata, cropBoxData, function(basechar) {//获取64位裁剪图片字符串
				$("#newimg").attr("src",basechar);
				//var imgformdata = $("#newimgform").serialize();
				// 回调后的函数处理        
				//$.getJSON("http://tonyli:8080/lightweb/module1/initgrid.do?jsonpCallback=?",
				//	imgformdata,
				//		function(data){
				//			
				//		});
			});
		}
		
	
	  </script>
</body>
</html>