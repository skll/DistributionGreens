<!doctype html>
<html lang="zh">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>jQuery简单且功能强大的图片剪裁插件|DEMO_jQuery之家-自由分享jQuery、html5、css3的插件库</title>
	<link rel="stylesheet" type="text/css" href="css/normalize.css" />
	<link rel="stylesheet" type="text/css" href="css/default.css">
	<link href="assets/css/bootstrap.min.css" rel="stylesheet">
  	<link href="dist/cropper.css" rel="stylesheet">
  	<link href="css/main.css" rel="stylesheet">
	<!--[if IE]>
		<script src="http://libs.useso.com/js/html5shiv/3.7/html5shiv.min.js"></script>
	<![endif]-->
</head>
<body>
<div class="htmleaf-container">
	<!--head-->
	<header class="htmleaf-header">
		<h1>头像上传</h1>
		<!-- 头部
		<h1>jQuery简单且功能强大的图片剪裁插件 <span>A simple jQuery image cropping plugin</span></h1>
		<div class="htmleaf-links">
			<a class="htmleaf-icon icon-htmleaf-home-outline" href="http://www.htmleaf.com/" title="jQuery之家" target="_blank"><span> jQuery之家</span></a>
			<a class="htmleaf-icon icon-htmleaf-arrow-forward-outline" href="http://www.htmleaf.com/jQuery/Image-Effects/201504211716.html" title="返回下载页" target="_blank"><span> 返回下载页</span></a>
		</div>
		-->
	</header>
	<!-- Content -->
	<div class="container">
		<div class="row"><!--图片显示-->
		  <div class="col-md-9"><!--初始化加载图片-->
			<!-- <h3 class="page-header">Demo:</h3> -->
			<div class="img-container">
			  <img src="shuzi.jpg" alt="Picture">
			</div>
		  </div>    
		  <div class="col-md-3"><!--预览图片的尺寸-->
			<!-- <h3 class="page-header">Preview:</h3> -->
			<div class="docs-preview clearfix">
			  <div class="img-preview preview-lg"></div>
			  <div class="img-preview preview-md"></div>
			  <div class="img-preview preview-sm"></div>
			  <div class="img-preview preview-xs"></div>
			</div>

			<!-- <h3 class="page-header">Data:</h3> -->
			<!--坐标-->
			<div class="docs-data">
			  <div class="input-group">
				<label class="input-group-addon" for="dataX">X</label>
				<input class="form-control" id="dataX" type="text" placeholder="x">
				<span class="input-group-addon">px</span>
			  </div>
			  <div class="input-group">
				<label class="input-group-addon" for="dataY">Y</label>
				<input class="form-control" id="dataY" type="text" placeholder="y">
				<span class="input-group-addon">px</span>
			  </div>
			  <div class="input-group">
				<label class="input-group-addon" for="dataWidth">Width</label>
				<input class="form-control" id="dataWidth" type="text" placeholder="width">
				<span class="input-group-addon">px</span>
			  </div>
			  <div class="input-group">
				<label class="input-group-addon" for="dataHeight">Height</label>
				<input class="form-control" id="dataHeight" type="text" placeholder="height">
				<span class="input-group-addon">px</span>
			  </div>
			  <div class="input-group">
				<label class="input-group-addon" for="dataRotate">Rotate</label>
				<input class="form-control" id="dataRotate" type="text" placeholder="rotate">
				<span class="input-group-addon">deg</span>
			  </div>
			</div>
			
		  </div>
		</div>

		<div class="row"><!--工具栏-->
		  <!--功能工具栏-->
		  <div class="col-md-9 docs-buttons">
			<!-- <h3 class="page-header">Toolbar:</h3> -->
			<!--样式工具栏-->
			<div class="btn-group">
			  <!--移动-->
			  <button class="btn btn-primary" data-method="setDragMode" data-option="move" type="button" title="Move">
				<span class="docs-tooltip" data-toggle="tooltip" title="$().cropper(&quot;setDragMode&quot;, &quot;move&quot;)">
				  <span class="icon icon-move"></span>
				</span>
			  </button>
			  <!--裁剪框-->
			  <button class="btn btn-primary" data-method="setDragMode" data-option="crop" type="button" title="Crop">
				<span class="docs-tooltip" data-toggle="tooltip" title="$().cropper(&quot;setDragMode&quot;, &quot;crop&quot;)">
				  <span class="icon icon-crop"></span>
				</span>
			  </button>
			  <!--放大-->
			  <button class="btn btn-primary" data-method="zoom" data-option="0.1" type="button" title="Zoom In">
				<span class="docs-tooltip" data-toggle="tooltip" title="$().cropper(&quot;zoom&quot;, 0.1)">
				  <span class="icon icon-zoom-in"></span>
				</span>
			  </button>
			  <!--缩小-->
			  <button class="btn btn-primary" data-method="zoom" data-option="-0.1" type="button" title="Zoom Out">
				<span class="docs-tooltip" data-toggle="tooltip" title="$().cropper(&quot;zoom&quot;, -0.1)">
				  <span class="icon icon-zoom-out"></span>
				</span>
			  </button>
			  <!--左旋转-->
			  <button class="btn btn-primary" data-method="rotate" data-option="-45" type="button" title="Rotate Left">
				<span class="docs-tooltip" data-toggle="tooltip" title="$().cropper(&quot;rotate&quot;, -45)">
				  <span class="icon icon-rotate-left"></span>
				</span>
			  </button>
			  <!--右旋转-->
			  <button class="btn btn-primary" data-method="rotate" data-option="45" type="button" title="Rotate Right">
				<span class="docs-tooltip" data-toggle="tooltip" title="$().cropper(&quot;rotate&quot;, 45)">
				  <span class="icon icon-rotate-right"></span>
				</span>
			  </button>
			</div>

			<!--动作工具栏--> 
			<div class="btn-group">
			  <!--锁定操作-->
			  <button class="btn btn-primary" data-method="disable" type="button" title="Disable">
				<span class="docs-tooltip" data-toggle="tooltip" title="$().cropper(&quot;disable&quot;)">
				  <span class="icon icon-lock"></span>
				</span>
			  </button>
			  <!--解锁操作-->
			  <button class="btn btn-primary" data-method="enable" type="button" title="Enable">
				<span class="docs-tooltip" data-toggle="tooltip" title="$().cropper(&quot;enable&quot;)">
				  <span class="icon icon-unlock"></span>
				</span>
			  </button>
			  <!--清除(裁剪框)-->
			  <button class="btn btn-primary" data-method="clear" type="button" title="Clear">
				<span class="docs-tooltip" data-toggle="tooltip" title="$().cropper(&quot;clear&quot;)">
				  <span class="icon icon-remove"></span>
				</span>
			  </button>
			  <!--重置-->
			  <button class="btn btn-primary" data-method="reset" type="button" title="Reset">
				<span class="docs-tooltip" data-toggle="tooltip" title="$().cropper(&quot;reset&quot;)">
				  <span class="icon icon-refresh"></span>
				</span>
			  </button>
			  <!--上传-->
			  <label class="btn btn-primary btn-upload" for="inputImage" title="Upload image file">
				<input class="sr-only" id="inputImage" name="file" type="file" accept="image/*">
				<span class="docs-tooltip" data-toggle="tooltip" title="Import image with Blob URLs">
				  <span class="icon icon-upload"></span>
				</span>
			  </label>
			  <!--（不使用）-->
			  <button class="btn btn-primary" data-method="destroy" type="button" title="Destroy">
				<span class="docs-tooltip" data-toggle="tooltip" title="$().cropper(&quot;destroy&quot;)">
				  <span class="icon icon-off"></span>
				</span>
			  </button>
			</div>
			
			<!--裁剪预览工具栏-->
			<div class="btn-group btn-group-crop">
			  <!--获取裁剪预览-->
			  <button class="btn btn-primary" data-method="getCroppedCanvas" type="button">
				<span class="docs-tooltip" data-toggle="tooltip" title="$().cropper(&quot;getCroppedCanvas&quot;)">
				  Get Cropped Canvas
				</span>
			  </button>
			  <!--获取裁剪预览小窗口-->
			  <button class="btn btn-primary" data-method="getCroppedCanvas" data-option="{ &quot;width&quot;: 160, &quot;height&quot;: 90 }" type="button">
				<span class="docs-tooltip" data-toggle="tooltip" title="$().cropper(&quot;getCroppedCanvas&quot;, { &quot;width&quot;: 160, &quot;height&quot;: 90 })">
				  160 &times; 90
				</span>
			  </button>
			  <!--获取裁剪预览大窗口-->
			  <button class="btn btn-primary" data-method="getCroppedCanvas" data-option="{ &quot;width&quot;: 320, &quot;height&quot;: 180 }" type="button">
				<span class="docs-tooltip" data-toggle="tooltip" title="$().cropper(&quot;getCroppedCanvas&quot;, { &quot;width&quot;: 320, &quot;height&quot;: 180 })">
				  320 &times; 180
				</span>
			  </button>
			</div>
			<!-- Show the cropped image in modal -->
			<!--预览窗口-->
			<div class="modal fade docs-cropped" id="getCroppedCanvasModal" aria-hidden="true" aria-labelledby="getCroppedCanvasTitle" role="dialog" tabindex="-1">
			  <div class="modal-dialog">
				<div class="modal-content">
				  <div class="modal-header">
					<button class="close" data-dismiss="modal" type="button" aria-hidden="true">&times;</button>
					<h4 class="modal-title" id="getCroppedCanvasTitle">Cropped</h4>
				  </div>
				  <div class="modal-body"></div>
				  <!-- <div class="modal-footer">
					<button class="btn btn-primary" data-dismiss="modal" type="button">Close</button>
				  </div> -->
				</div>
			  </div>
			</div><!-- /.modal -->
			
			<!--获取裁剪框相对于图片的位置	{"x":0,"y":0,"width":359,"height":359,"rotate":0}-->
			<button class="btn btn-primary" data-method="getData" data-option="" data-target="#putData" type="button">
			  <span class="docs-tooltip" data-toggle="tooltip" title="$().cropper(&quot;getData&quot;)">
				Get Data
			  </span>
			</button>
			<!--获取图片的大小（原图和伸缩后） {"naturalWidth":621,"naturalHeight":359,"aspectRatio":1.7298050139275767,"rotate":0,"width":644.8713091922006,"height":372.8,"left":0,"top":0}-->
			<button class="btn btn-primary" data-method="getImageData" data-option="" data-target="#putData" type="button">
			  <span class="docs-tooltip" data-toggle="tooltip" title="$().cropper(&quot;getImageData&quot;)">
				Get Image Data
			  </span>
			</button>
			<!--获取幕布大小位置	{"left":97.53389972144845,"top":46.599999999999966,"width":644.8713091922006,"height":372.8}-->
			<button class="btn btn-primary" data-method="getCanvasData" data-option="" data-target="#putData" type="button">
			  <span class="docs-tooltip" data-toggle="tooltip" title="$().cropper(&quot;getCanvasData&quot;)">
				Get Canvas Data
			  </span>
			</button>
			<!--定义幕布大小位置-->
			<button class="btn btn-primary" data-method="setCanvasData" data-target="#putData" type="button">
			  <span class="docs-tooltip" data-toggle="tooltip" title="$().cropper(&quot;setCanvasData&quot;, data)">
				Set Canvas Data
			  </span>
			</button>
			<!--获取裁剪框大小位置	{"left":97.53389972144845,"top":46.599999999999966,"width":372.8,"height":372.8}-->
			<button class="btn btn-primary" data-method="getCropBoxData" data-option="" data-target="#putData" type="button">
			  <span class="docs-tooltip" data-toggle="tooltip" title="$().cropper(&quot;getCropBoxData&quot;)">
				Get Crop Box Data
			  </span>
			</button>
			<!--定义裁剪框大小位置-->
			<button class="btn btn-primary" data-method="setCropBoxData" data-target="#putData" type="button">
			  <span class="docs-tooltip" data-toggle="tooltip" title="$().cropper(&quot;setCropBoxData&quot;, data)">
				Set Crop Box Data
			  </span>
			</button>
			<!--数据显示和输入框-->
			<input class="form-control" id="putData" type="text" placeholder="Get data to here or set data with this value">

		  </div><!-- /.docs-buttons -->

		  <!---->
		  <div class="col-md-3 docs-toggles">
			<!-- <h3 class="page-header">Toggles:</h3> -->
			<!--裁剪框比例按钮-->
			<div class="btn-group btn-group-justified" data-toggle="buttons">
			  <label class="btn btn-primary active" data-method="setAspectRatio" data-option="1.7777777777777777" title="Set Aspect Ratio">
				<input class="sr-only" id="aspestRatio1" name="aspestRatio" value="1.7777777777777777" type="radio">
				<span class="docs-tooltip" data-toggle="tooltip" title="$().cropper(&quot;setAspectRatio&quot;, 16 / 9)">
				  16:9
				</span>
			  </label>
			  <label class="btn btn-primary" data-method="setAspectRatio" data-option="1.3333333333333333" title="Set Aspect Ratio">
				<input class="sr-only" id="aspestRatio2" name="aspestRatio" value="1.3333333333333333" type="radio">
				<span class="docs-tooltip" data-toggle="tooltip" title="$().cropper(&quot;setAspectRatio&quot;, 4 / 3)">
				  4:3
				</span>
			  </label>
			  <label class="btn btn-primary" data-method="setAspectRatio" data-option="1" title="Set Aspect Ratio">
				<input class="sr-only" id="aspestRatio3" name="aspestRatio" value="1" type="radio">
				<span class="docs-tooltip" data-toggle="tooltip" title="$().cropper(&quot;setAspectRatio&quot;, 1 / 1)">
				  1:1
				</span>
			  </label>
			  <label class="btn btn-primary" data-method="setAspectRatio" data-option="0.6666666666666666" title="Set Aspect Ratio">
				<input class="sr-only" id="aspestRatio4" name="aspestRatio" value="0.6666666666666666" type="radio">
				<span class="docs-tooltip" data-toggle="tooltip" title="$().cropper(&quot;setAspectRatio&quot;, 2 / 3)">
				  2:3
				</span>
			  </label>
			  <label class="btn btn-primary" data-method="setAspectRatio" data-option="NaN" title="Set Aspect Ratio">
				<input class="sr-only" id="aspestRatio5" name="aspestRatio" value="NaN" type="radio">
				<span class="docs-tooltip" data-toggle="tooltip" title="$().cropper(&quot;setAspectRatio&quot;, NaN)">
				  Free
				</span>
			  </label>
			</div>

			<div class="dropdown dropup docs-options">
			  <button class="btn btn-primary btn-block dropdown-toggle" id="toggleOptions" type="button" data-toggle="dropdown" aria-expanded="true">
				Toggle Options
				<span class="caret"></span>
			  </button>
			  <ul class="dropdown-menu" role="menu" aria-labelledby="toggleOptions">
				<li role="presentation">
				  <label class="checkbox-inline">
					<input type="checkbox" name="option" value="strict" checked>
					strict
				  </label>
				</li>
				<li role="presentation">
				  <label class="checkbox-inline">
					<input type="checkbox" name="option" value="responsive" checked>
					responsive
				  </label>
				</li>
				<li role="presentation">
				  <label class="checkbox-inline">
					<input type="checkbox" name="option" value="checkImageOrigin" checked>
					checkImageOrigin
				  </label>
				</li>

				<li role="presentation">
				  <label class="checkbox-inline">
					<input type="checkbox" name="option" value="modal" checked>
					modal
				  </label>
				</li>
				<li role="presentation">
				  <label class="checkbox-inline">
					<input type="checkbox" name="option" value="guides" checked>
					guides
				  </label>
				</li>
				<li role="presentation">
				  <label class="checkbox-inline">
					<input type="checkbox" name="option" value="highlight" checked>
					highlight
				  </label>
				</li>
				<li role="presentation">
				  <label class="checkbox-inline">
					<input type="checkbox" name="option" value="background" checked>
					background
				  </label>
				</li>

				<li role="presentation">
				  <label class="checkbox-inline">
					<input type="checkbox" name="option" value="autoCrop" checked>
					autoCrop
				  </label>
				</li>
				<li role="presentation">
				  <label class="checkbox-inline">
					<input type="checkbox" name="option" value="dragCrop" checked>
					dragCrop
				  </label>
				</li>
				<li role="presentation">
				  <label class="checkbox-inline">
					<input type="checkbox" name="option" value="movable" checked>
					movable
				  </label>
				</li>
				<li role="presentation">
				  <label class="checkbox-inline">
					<input type="checkbox" name="option" value="resizable" checked>
					resizable
				  </label>
				</li>
				<li role="presentation">
				  <label class="checkbox-inline">
					<input type="checkbox" name="option" value="rotatable" checked>
					rotatable
				  </label>
				</li>
				<li role="presentation">
				  <label class="checkbox-inline">
					<input type="checkbox" name="option" value="zoomable" checked>
					zoomable
				  </label>
				</li>
				<li role="presentation">
				  <label class="checkbox-inline">
					<input type="checkbox" name="option" value="touchDragZoom" checked>
					touchDragZoom
				  </label>
				</li>
				<li role="presentation">
				  <label class="checkbox-inline">
					<input type="checkbox" name="option" value="mouseWheelZoom" checked>
					mouseWheelZoom
				  </label>
				</li>
			  </ul>
			</div><!-- /.dropdown -->
		  </div><!-- /.docs-toggles -->
		</div>
	</div>

</div>
	
	<script src="assets/js/jquery.min.js"></script>
	  <script src="assets/js/bootstrap.min.js"></script>
	  <script src="dist/cropper.js"></script>
	  <script src="js/main.js"></script>
	  <script>
	  function convertToData(url, canvasdata, cropdata, callback) {
			var cropw = cropdata.width; // 剪切的宽
			var croph = cropdata.height; // 剪切的宽
			var imgw = canvasdata.width; // 图片缩放或则放大后的高
			var imgh = canvasdata.height; // 图片缩放或则放大后的高
			var poleft = canvasdata.left - cropdata.left; // canvas定位图片的左边位置
			var potop = canvasdata.top - cropdata.top; // canvas定位图片的上边位置
			var canvas = document.createElement("canvas");
			var ctx = canvas.getContext('2d');
			canvas.width = cropw;
			canvas.height = croph;
			var img = new Image();
			img.src = url + '?' + new Date().getTime();
			img.onload = function() {
				this.width = imgw;
				this.height = imgh;
					// 这里主要是懂得canvas与图片的裁剪之间的关系位置
				ctx.drawImage(this, poleft, potop, this.width, this.height);
				var base64 = canvas.toDataURL('image/jpg', 1);  // 这里的“1”是指的是处理图片的清晰度（0-1）之间，当然越小图片越模糊，处理后的图片大小也就越小
				callback && callback(base64)      // 回调base64字符串
			}
		}
	  </script>
</body>
</html>