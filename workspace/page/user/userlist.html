<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	
    <title>用户管理</title>
    
    <link rel="stylesheet" href="../../bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="../../bootstrap-table/bootstrap-table.css">

    <script src="../../styles/js/jquery.min.js"></script>
    <script src="../../bootstrap/js/bootstrap.min.js"></script>
    <script src="../../bootstrap-table/bootstrap-table.js"></script>
    <script src="../../bootstrap-table/mobile/bootstrap-table-mobile.js"></script>
    <script src="../../bootstrap-table/bootstrap-table-zh-CN.js"></script>
</head>
<body>
<div class="container">
	<div id="toolbar">
		<div class="form-inline" role="form">
			<div class="form-group">
				<input id="id_search" class="form-control" style="width:150px;" type="text" placeholder="请输入ID">
			</div>
			<div class="form-group">
				<input id="username_search" class="form-control" style="width:150px;" type="text" placeholder="请输入姓名">
			</div>

			<button id="searchSubmit" type="button" class="btn btn-default">搜索</button>
			<button id="clearSearch" type="button" class="btn btn-default">清空</button>
		</div>
	</div>	
    <table id="table"
			data-toolbar="#toolbar"
           data-toggle="table"
		   data-url="http://tonyli:8080/lightweb/module1/initgrid.do?jsonpCallback=?"
		   data-striped="true"
           data-mobile-responsive="true"
           data-check-on-init="true"
		   data-pagination="true"
		   data-side-pagination="server"
           data-id-field="id"
           data-page-list="[10, 25, 50, 100, ALL]"
		   data-query-params="queryParams">
        <thead>
        <tr>
			<th data-field="ids" data-checkbox="true"></th>
            <th data-field="id">ID</th>
            <th data-field="username" data-sortable="true">姓名</th>
            <th data-field="job" data-sortable="true">职务</th>
			<th data-field="mobilephone" data-sortable="mobilephone">手机号码</th>
        </tr>
        </thead>
    </table>
</div>

<script>
	var $table = $("#table");
	var $searchSubmit = $("#searchSubmit");
	var $clearSearch = $("#clearSearch");
	var queryParams = function (params) {
	//alert("limit:"+params.limit+"--ooffset:"+params.offset+"----order:"+params.order+"---sort:"+params.sort+"---search:"+params.search);
        var temp = {   //这里的键的名字和控制器的变量名必须一直，这边改动，控制器也需要改成一样的
            limit: params.limit,   //页面大小
            offset: params.offset,  //页码
            order: params.order,
            ordername : params.sort,
			id_search : $("#id_search").val(),
			username_search : $("#username_search").val()
        };
        return temp;
    };
	
	//重置table高度
	function reView(){
		$table.bootstrapTable('resetView', {
			height: getHeight()
		});
	}
	//获取高度
	function getHeight(){
		return $(window).height()-$('h1').outerHeight(true);
	}
	
	
	$(function () {
		//绑定搜索按钮
        $searchSubmit.click(function () {
            $table.bootstrapTable('refresh');
        });
		//绑定清空按钮
		$clearSearch.click(function(){
			document.getElementById("id_search").value = "";
			document.getElementById("username_search").value = "";
		});
		

    });
	window.onload=function(){ 
		reView();
	} 
	
</script>
</body>
</html>