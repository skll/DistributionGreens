<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	
    <title>用户管理</title>
    
    <link rel="stylesheet" href="../../bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="../../bootstrap-table/bootstrap-table.css">

    <script src="../../styles/js/jquery.min.js"></script>
    <script src="../../bootstrap/js/bootstrap.min.js"></script>
    <script src="../../bootstrap-table/bootstrap-table.js"></script>
    <script src="../../bootstrap-table/mobile/bootstrap-table-mobile.js"></script>
</head>
<body>
<div class="container">
    <h1>用户列表</h1>
	<div id="toolbar">
		<div class="form-inline" role="form">
			<div class="form-group">
				<input id="formSearch" class="form-control" type="text" placeholder="请输入搜索条件">
			</div>

			<button id="searchSubmit" type="button" class="btn btn-default">搜索</button>
			<button id="clearSearch" type="button" class="btn btn-default">清空</button>
		</div>
	</div>	
    <table id="table"
			data-toolbar="#toolbar"
           data-toggle="table"
		   data-url="http://tonyli:8080/lightweb/module1/initgrid.do?jsonpCallback=?"
           data-mobile-responsive="true"
           data-check-on-init="true"
		   data-pagination="true"
		   data-side-pagination="server"
           data-id-field="id"
           data-page-list="[10, 25, 50, 100, ALL]"
		   data-query-params="queryParams">
        <thead>
        <tr>
			<th data-field="ids" data-checkbox="true">ID</th>
            <th data-field="id">ID</th>
            <th data-field="username" data-sortable="true">username</th>
            <th data-field="job" data-sortable="true">job</th>
			<th data-field="mobilephone" data-sortable="mobilephone">job</th>
        </tr>
        </thead>
    </table>
</div>

<script>
	var $table = $("#table");
	var $searchSubmit = $("#searchSubmit");
	var $clearSearch = $("#clearSearch");
	var queryParams = function (params) {
	//alert("limit:"+params.limit+"--ooffset:"+params.offset+"----order:"+params.order+"---sort:"+params.sort+"---search:"+params.search);
        var temp = {   //这里的键的名字和控制器的变量名必须一直，这边改动，控制器也需要改成一样的
            limit: params.limit,   //页面大小
            offset: params.offset,  //页码
            order: params.order,
            ordername : params.sort,
			search : $("#formSearch").val()
        };
        return temp;
    };
	
	//重置table高度
	function reView(){
		$table.bootstrapTable('resetView', {
			height: getHeight()
		});
	}
	//获取高度
	function getHeight(){
		return $(window).height()-$('h1').outerHeight(true);
	}
	
	
	$(function () {
        $searchSubmit.click(function () {
            $table.bootstrapTable('refresh');
        });
		
		$clearSearch.click(function(){
			document.getElementById("formSearch").value = "";
		});
		

    });
	window.onload=function(){ 
		reView();
	} 
	
</script>
</body>
</html>